{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/hfink/source/repos/knights-challenge/src/ui/knight.angular/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/knight.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\nfunction SearchComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 11)(1, \"form\");\n    i0.ɵɵelement(2, \"span\", 12);\n    i0.ɵɵelementStart(3, \"input\", 13);\n    i0.ɵɵlistener(\"input\", function SearchComponent_div_0_Template_input_input_3_listener($event) {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.find($event));\n    });\n    i0.ɵɵelementEnd()()();\n  }\n}\nfunction SearchComponent_div_1_tbody_22_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tbody\")(1, \"tr\")(2, \"th\", 19);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"td\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"td\");\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"td\");\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"td\");\n    i0.ɵɵtext(11);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"td\");\n    i0.ɵɵtext(13);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"td\");\n    i0.ɵɵtext(15);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"td\");\n    i0.ɵɵtext(17);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(18, \"td\")(19, \"span\", 20);\n    i0.ɵɵlistener(\"click\", function SearchComponent_div_1_tbody_22_Template_span_click_19_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r7);\n      const item_r5 = restoredCtx.$implicit;\n      const ctx_r6 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r6.openModal(item_r5.id));\n    });\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const item_r5 = ctx.$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(item_r5.id);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(item_r5.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(item_r5.nickName);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(item_r5.age);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(item_r5.weapons);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(item_r5.attribute);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(item_r5.attack);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(item_r5.experiense);\n  }\n}\nfunction SearchComponent_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 14)(1, \"table\", 15)(2, \"thead\", 16)(3, \"tr\")(4, \"th\", 17);\n    i0.ɵɵtext(5, \"Id\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"th\", 17);\n    i0.ɵɵtext(7, \"Name\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"th\", 17);\n    i0.ɵɵtext(9, \"NickName\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"th\", 17);\n    i0.ɵɵtext(11, \"Age\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"th\", 17);\n    i0.ɵɵtext(13, \"Weapons\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"th\", 17);\n    i0.ɵɵtext(15, \"Attribute\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"th\", 17);\n    i0.ɵɵtext(17, \"Attack\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(18, \"th\", 17);\n    i0.ɵɵtext(19, \"Experiense\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(20, \"th\");\n    i0.ɵɵtext(21, \"\\u00A0\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵtemplate(22, SearchComponent_div_1_tbody_22_Template, 20, 8, \"tbody\", 18);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(22);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.knightListFilter);\n  }\n}\nexport class SearchComponent {\n  constructor(knightService, activatedRoute) {\n    this.knightService = knightService;\n    this.activatedRoute = activatedRoute;\n    this.knightList = [];\n    this.knightListFilter = [];\n    this.heroes = false;\n  }\n  ngOnInit() {\n    this.activatedRoute.queryParams.subscribe(params => {\n      this.heroes = params['heroes'] == null ? false : true;\n      this.getAll();\n      this.formModal = new window.bootstrap.Modal(document.getElementById('confirmModal'));\n    });\n  }\n  getAll() {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      _this.knightService.getAll().subscribe(response => {\n        _this.knightList = response;\n        _this.findHeroes();\n      });\n    })();\n  }\n  find(e) {\n    const target = e.target;\n    const value = target.value.toLowerCase();\n    if (value == \"\") {\n      this.knightListFilter = this.knightList;\n      return;\n    }\n    this.knightListFilter = this.knightList.filter(k => k.id.toLowerCase().includes(value));\n  }\n  findHeroes() {\n    this.knightListFilter = this.knightList;\n    if (this.heroes) this.knightListFilter = this.knightList.filter(k => k.experiense > 0);\n  }\n  openModal(id) {\n    this.id = id;\n    this.formModal.show();\n  }\n  remove() {\n    var index = 0;\n    var id = this.id;\n    this.knightListFilter.some(function (elem, i) {\n      return elem.id === id ? (index = i, true) : false;\n    });\n    this.knightListFilter.splice(index, 1);\n    this.knightService.delete(this.id).subscribe(success => {\n      console.log(success);\n    });\n    this.closeModal();\n    this.id = \"\";\n  }\n  closeModal() {\n    this.formModal.hide();\n  }\n}\nSearchComponent.ɵfac = function SearchComponent_Factory(t) {\n  return new (t || SearchComponent)(i0.ɵɵdirectiveInject(i1.KnightService), i0.ɵɵdirectiveInject(i2.ActivatedRoute));\n};\nSearchComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: SearchComponent,\n  selectors: [[\"app-search\"]],\n  decls: 16,\n  vars: 2,\n  consts: [[\"class\", \"search-container\", 4, \"ngIf\"], [\"class\", \"row\", \"style\", \"margin-top: 30px;\", 4, \"ngIf\"], [\"id\", \"confirmModal\", \"tabindex\", \"-1\", \"aria-labelledby\", \"exampleModalLabel\", \"aria-hidden\", \"true\", 1, \"modal\", \"fade\"], [1, \"modal-dialog\"], [1, \"modal-content\"], [1, \"modal-header\"], [\"id\", \"exampleModalLabel\", 1, \"modal-title\"], [1, \"modal-body\"], [1, \"modal-footer\"], [\"type\", \"button\", \"data-bs-dismiss\", \"modal\", 1, \"btn\", \"btn-secondary\", 3, \"click\"], [\"type\", \"button\", 1, \"btn\", \"btn-primary\", 3, \"click\"], [1, \"search-container\"], [1, \"bi\", \"bi-search\"], [\"type\", \"text\", \"placeholder\", \"Find by id knight\", 3, \"input\"], [1, \"row\", 2, \"margin-top\", \"30px\"], [1, \"table\"], [1, \"thead-dark\"], [\"scope\", \"col\"], [4, \"ngFor\", \"ngForOf\"], [\"scope\", \"row\"], [1, \"bi\", \"bi-trash\", \"delete\", 3, \"click\"]],\n  template: function SearchComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵtemplate(0, SearchComponent_div_0_Template, 4, 0, \"div\", 0);\n      i0.ɵɵtemplate(1, SearchComponent_div_1_Template, 23, 1, \"div\", 1);\n      i0.ɵɵelementStart(2, \"div\", 2)(3, \"div\", 3)(4, \"div\", 4)(5, \"div\", 5)(6, \"h5\", 6);\n      i0.ɵɵtext(7, \"Confirm\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(8, \"div\", 7)(9, \"h3\");\n      i0.ɵɵtext(10, \"Are you sure you want to delete?\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(11, \"div\", 8)(12, \"button\", 9);\n      i0.ɵɵlistener(\"click\", function SearchComponent_Template_button_click_12_listener() {\n        return ctx.closeModal();\n      });\n      i0.ɵɵtext(13, \" Close \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(14, \"button\", 10);\n      i0.ɵɵlistener(\"click\", function SearchComponent_Template_button_click_14_listener() {\n        return ctx.remove();\n      });\n      i0.ɵɵtext(15, \" Delete \");\n      i0.ɵɵelementEnd()()()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵproperty(\"ngIf\", !ctx.heroes);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.knightListFilter.length > 0);\n    }\n  },\n  dependencies: [i3.NgForOf, i3.NgIf, i4.ɵNgNoValidate, i4.NgControlStatusGroup, i4.NgForm],\n  styles: [\".search-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{\\r\\n    margin-top: 20px;\\r\\n    width: 100%;\\r\\n    position: relative;\\r\\n}\\r\\n\\r\\n.search-container[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{\\r\\n    position: absolute;\\r\\n    top : 8px;\\r\\n    left: 8px;\\r\\n}\\r\\n\\r\\n.search-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{\\r\\n    padding: 0.5em;\\r\\n    width: 100%;\\r\\n    text-align: center;\\r\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY29tcG9uZW50cy9zZWFyY2gvc2VhcmNoLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7SUFDSSxnQkFBZ0I7SUFDaEIsV0FBVztJQUNYLGtCQUFrQjtBQUN0Qjs7QUFFQTtJQUNJLGtCQUFrQjtJQUNsQixTQUFTO0lBQ1QsU0FBUztBQUNiOztBQUVBO0lBQ0ksY0FBYztJQUNkLFdBQVc7SUFDWCxrQkFBa0I7QUFDdEIiLCJzb3VyY2VzQ29udGVudCI6WyIuc2VhcmNoLWNvbnRhaW5lciBmb3Jte1xyXG4gICAgbWFyZ2luLXRvcDogMjBweDtcclxuICAgIHdpZHRoOiAxMDAlO1xyXG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xyXG59XHJcblxyXG4uc2VhcmNoLWNvbnRhaW5lciBzcGFue1xyXG4gICAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gICAgdG9wIDogOHB4O1xyXG4gICAgbGVmdDogOHB4O1xyXG59XHJcblxyXG4uc2VhcmNoLWNvbnRhaW5lciBpbnB1dHtcclxuICAgIHBhZGRpbmc6IDAuNWVtO1xyXG4gICAgd2lkdGg6IDEwMCU7XHJcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbn1cclxuIl0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["i0","SearchComponent","constructor","knightService","activatedRoute","ngOnInit","queryParams","subscribe","params","heroes","getAll","formModal","window","bootstrap","Modal","document","getElementById","response","knightList","findHeroes","find","e","target","value","toLowerCase","knightListFilter","filter","k","id","includes","experiense","openModal","show","remove","index","some","elem","i","splice","delete","success","console","log","closeModal","hide","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\Users\\hfink\\source\\repos\\knights-challenge\\src\\ui\\knight.angular\\src\\app\\components\\search\\search.component.html","C:\\Users\\hfink\\source\\repos\\knights-challenge\\src\\ui\\knight.angular\\src\\app\\components\\search\\search.component.ts"],"sourcesContent":["<div *ngIf=\"!this.heroes\" class=\"search-container\" > \n  <form>\n    <span class=\"bi bi-search\"></span>\n    <input type=\"text\" placeholder=\"Find by id knight\" (input)=\"find($event)\">\n</form>\n</div>\n\n<div *ngIf=\"knightListFilter.length > 0 \" class=\"row\" style=\"margin-top: 30px;\">\n  \n    <table class=\"table\">\n    <thead class=\"thead-dark\">\n      <tr>\n        <th scope=\"col\">Id</th>\n        <th scope=\"col\">Name</th>\n        <th scope=\"col\">NickName</th>\n        <th scope=\"col\">Age</th>\n        <th scope=\"col\">Weapons</th>\n        <th scope=\"col\">Attribute</th>\n        <th scope=\"col\">Attack</th>\n        <th scope=\"col\">Experiense</th>\n        <th>&nbsp;</th>\n      </tr>\n    </thead>\n    <tbody *ngFor=\"let item of knightListFilter\">\n      <tr >\n        <th scope=\"row\">{{item.id}}</th>\n        <td>{{item.name}}</td>\n        <td>{{item.nickName}}</td>\n        <td>{{item.age}}</td>\n        <td>{{item.weapons}}</td>\n        <td>{{item.attribute}}</td>\n        <td>{{item.attack}}</td>\n        <td>{{item.experiense}}</td>\n        <td><span class=\"bi bi-trash delete \" (click)=\"openModal(item.id)\"></span></td>\n      </tr>\n    </tbody>\n  </table>\n</div>\n<div\n  class=\"modal fade\"\n  id=\"confirmModal\"\n  tabindex=\"-1\"\n  aria-labelledby=\"exampleModalLabel\"\n  aria-hidden=\"true\"\n>\n  <div class=\"modal-dialog\">\n    <div class=\"modal-content\">\n      <div class=\"modal-header\">\n        <h5 class=\"modal-title\" id=\"exampleModalLabel\">Confirm</h5>\n      </div>\n      <div class=\"modal-body\">\n        <h3>Are you sure you want to delete?</h3>\n      </div>\n      <div class=\"modal-footer\">\n        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\" (click)=\"closeModal()\">\n          Close\n        </button>\n        <button type=\"button\" class=\"btn btn-primary\" (click)=\"remove()\">\n          Delete \n        </button>\n      </div>\n    </div>\n  </div>\n</div>","import { Component, OnInit } from '@angular/core';\nimport {KnightService} from 'src/app/services/knight.service';\nimport  {knightResponse} from 'src/app/knightResponse';\nimport { ActivatedRoute } from '@angular/router';\ndeclare var window: any;\n@Component({\n  selector: 'app-search',\n  templateUrl: './search.component.html',\n  styleUrls: ['./search.component.css']\n})\n\nexport class SearchComponent implements OnInit {\n  \n  knightList: knightResponse[] = []\n  knightListFilter : knightResponse[] = []\n  heroes = false\n  id!: string\n  formModal: any\n\n  constructor(private knightService : KnightService ,private activatedRoute : ActivatedRoute) { }\n\n  ngOnInit(): void {\n\n    this.activatedRoute.queryParams.subscribe(params=> {\n      this.heroes = params['heroes'] == null ? false : true\n      this.getAll()\n      this.formModal = new window.bootstrap.Modal(\n        document.getElementById('confirmModal')\n      );\n    })\n  }\n  async getAll() {\n    this.knightService.getAll().subscribe((response) => {\n      \n      this.knightList = response\n      this.findHeroes()\n    });\n  }\n\n  find(e : Event) : void {\n\n    const target = e.target as HTMLInputElement\n    const value = target.value.toLowerCase()\n\n    if(value == \"\"){\n      this.knightListFilter =  this.knightList\n      return\n    }\n    this.knightListFilter = this.knightList.filter(k => k.id.toLowerCase().includes(value))\n  }\n\n  findHeroes(){\n    this.knightListFilter = this.knightList;\n    \n    if (this.heroes)\n      this.knightListFilter = this.knightList.filter(k => k.experiense > 0)\n  }\n\n  openModal(id : string){\n    this.id = id;\n    this.formModal.show()\n  }\n \n  remove(){\n    var index = 0;\n    var id = this.id\n\n    this.knightListFilter.some(function (elem, i) {\n        return elem.id === id ? (index = i, true) : false;\n    });\n\n    this.knightListFilter.splice(index ,1)\n    this.knightService.delete(this.id).subscribe(success => { console.log(success)});\n    this.closeModal()\n    this.id=\"\";\n    \n  }\n  closeModal(){\n    this.formModal.hide();\n  }\n }\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}